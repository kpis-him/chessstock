{% extends "layout.html" %}

{% block main %}
<div class="container mt-4">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chessboard.js/1.0.0/chessboard-1.0.0.min.css" />

    <div class="row">
        <div class="col">
            <div id="board1" style="width: 400px"></div>
            <button id="startBtn" class="btn btn-primary mt-2">Start Position</button>
            <button id="clearBtn" class="btn btn-danger mt-2">Clear Board</button>
        </div>
    </div>

    <script>
        var board1 = Chessboard('board1', {
            draggable: true,
            dropOffBoard: 'trash',
            sparePieces: true,
            pieceTheme: '/static/img/chesspieces/wikipedia/{piece}.png',
            position: 'start',
            showErrors: 'alert'
        });

        $('#startBtn').on('click', board1.start);
        $('#clearBtn').on('click', board1.clear);
    </script>
    <script type = "module">
        import { Chess } from 'chess.js'

        const chess = new Chess()
        while (!chess.isGameOver()) {
            const moves = chess.moves()
            const move = moves[Math.floor(Math.random() * moves.length)]
            chess.move(move)
        }
        console.log(chess.pgn())
    </script>
</div>
{% endblock %}
